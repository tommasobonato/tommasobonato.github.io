/* Controls */
.sim-controls{ display:flex; gap:18px; align-items:center; justify-content:center; flex-wrap:wrap; margin:4px auto 10px; }
.sim-controls .ctrl{ display:flex; align-items:center; gap:8px; }
.sim-controls label{ font-weight:600; }
.sim-controls input[type=range]{ width:180px; }
.sim-controls .badge{ font-variant-numeric:tabular-nums; font-weight:700; }

/* Wrapper & headings */
.agg-wrapper{ clear:both; margin:10px 0 6px; position:relative; width:100%; max-width:100%; text-align:center; }
.agg-label{ text-align:center; font-weight:700; opacity:.95; margin:8px 0; }

/* Links (top & per-ToR) */
#agg-svg,.tor-svg{ display:inline-block; width:100%; height:100px; margin:6px auto 8px; color:rgba(125,211,252,.95); overflow:visible; pointer-events:none; }
.tor-svg{ height:80px; }
.agg-link{ stroke:currentColor; stroke-width:3; fill:none; }

/* Switch grid */
.tb-switches.under-bio{ display:grid; grid-template-columns:repeat(2, minmax(260px, max-content)); gap:18px; width:max-content; margin:0 auto 18px; justify-content:center; justify-items:center; }
@media (max-width:720px){ .tb-switches.under-bio{ grid-template-columns:1fr; width:100%; } }
.tor{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.tor-title{ font-weight:600; opacity:.95; }

/* Switch face */
.tb-rack{ position:relative; display:inline-block; font-size:12px; line-height:1.2; padding:8px 10px; border-radius:12px; box-sizing:border-box; background:linear-gradient(180deg,#0e1117,#131722); border:1px solid rgba(255,255,255,.06); box-shadow:inset 0 1px 0 rgba(255,255,255,.05), 0 8px 22px rgba(0,0,0,.35); color:inherit; }
:root[data-theme='light'] .tb-rack,
@media (prefers-color-scheme: light){ .tb-rack{ background:linear-gradient(180deg,#f7f8fb,#e9ecf3); border-color:rgba(0,0,0,.08);} }

/* Telemetry rows (right-aligned LEDs) */
.tb-row{ display:grid; grid-template-columns:max-content 1fr auto auto; align-items:center; column-gap:8px; }
.tb-row + .tb-row{ margin-top:4px; }
.tb-label{ font-weight:600; opacity:.85; min-width:9ch; text-align:right; user-select:none; }
.tb-bank{ display:inline-flex; gap:5px; justify-self:end; }
.tb-led{ width:7px; height:7px; border-radius:50%; background:transparent; box-shadow:0 0 0 1px rgba(255,255,255,.45) inset; opacity:.95; }
.tb-led.on{ background:#22c55e; box-shadow:0 0 8px rgba(34,197,94,.85), 0 0 0 1px rgba(34,197,94,.9) inset; animation:tb-blink 2s ease-in-out infinite; }
@keyframes tb-blink{ 50%{ filter:brightness(1.5); } }
.tb-bits{ font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace; letter-spacing:.5px; opacity:.9; }
.tb-dec{ font-variant-numeric:tabular-nums; min-width:3ch; text-align:right; opacity:.85; }

/* Leaves */
.leaf-row{ display:flex; justify-content:space-between; align-items:center; gap:12px; width:100%; max-width:420px; margin:0 auto; }
.leaf{ width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:50%; text-decoration:none; color:inherit; background:linear-gradient(180deg,#0e1117,#131722); border:1px solid rgba(255,255,255,.08); box-shadow:0 6px 16px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05); transition:transform .12s ease, box-shadow .12s ease; font-size:18px; }
.leaf:hover{ transform:translateY(-1px) scale(1.03); box-shadow:0 8px 22px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.08); }

/* Packets: uniform yellow */
#agg-svg .pkt, .tor-svg .pkt{ fill:#fcd34d; filter:drop-shadow(0 0 4px rgba(252,211,77,.9)); }
